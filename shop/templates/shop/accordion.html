{% extends "base_shop.html" %}
{% load static %}
{% load humanize %}

{% block content %}
{% include "header.html" with top_banner=top_banner %}

<body>

  {% if messages %}
    <div class="messages">
      {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="shop-details-top-section mt-110 mb-110">
    <div class="container-xl container-fluid-lg container">
      <div class="row gy-5">
        <div class="col-lg-6">
          <div class="shop-details-img sticky">
            <div class="tab-content" id="v-pills-tabContent">

              {% if product.image1 %}
              <div class="tab-pane fade show active" id="v-pills-img1" role="tabpanel">
                <div class="shop-details-tab-img product-img--main" data-scale="1.4"
                  data-image="{{product.image1.url}}">
                  <img src="{{product.image1.url}}" alt>
                </div>
              </div>
              {% endif %}

              {% if product.image2 %}
              <div class="tab-pane fade" id="v-pills-img2" role="tabpanel">
                <div class="shop-details-tab-img product-img--main" data-scale="1.4"
                  data-image="{{product.image2.url}}">
                  <img src="{{product.image2.url}}" alt>
                </div>
              </div>
              {% endif %}

              {% if product.image3 %}
              <div class="tab-pane fade" id="v-pills-img3" role="tabpanel" aria-labelledby="v-pills-img3-tab">
                <div class="shop-details-tab-img product-img--main" data-scale="1.4"
                  data-image="{{product.image3.url}}">
                  <img src="{{product.image3.url}}" alt>
                </div>
              </div>
              {% endif %}

              {% if product.image4 %}
              <div class="tab-pane fade" id="v-pills-img4" role="tabpanel" aria-labelledby="v-pills-img4-tab">
                <div class="shop-details-tab-img product-img--main" data-scale="1.4" data-image="{{product.image4}}">
                  <img src="{{product.image4}}" alt>
                </div>
              </div>
              {% endif %}


            </div>

            <div class="nav nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
              {% if product.image1 %}
              <button class="nav-link active" id="v-pills-img1-tab" data-bs-toggle="pill" data-bs-target="#v-pills-img1"
                type="button" role="tab" aria-controls="v-pills-img1" aria-selected="true">
                <img src="{{product.image1.url}}" alt>
              </button>
              {% endif %}

              {% if product.image2 %}
              <button class="nav-link" id="v-pills-img2-tab" data-bs-toggle="pill" data-bs-target="#v-pills-img2"
                type="button" role="tab" aria-controls="v-pills-img2" aria-selected="false">
                <img src="{{product.image2.url}}" alt>
              </button>
              {% endif %}



              {% if product.image3 %}
              <button class="nav-link" id="v-pills-img3-tab" data-bs-toggle="pill" data-bs-target="#v-pills-img3"
                type="button" role="tab" aria-controls="v-pills-img3" aria-selected="false">
                <img src="{{product.image3.url}}" alt>
              </button>
              {% endif %}



              {% if product.image4 %}
              <button class="nav-link" id="v-pills-img4-tab" data-bs-toggle="pill" data-bs-target="#v-pills-img4"
                type="button" role="tab" aria-controls="v-pills-img4" aria-selected="false">
                <img src="{{product.image4.url}}" alt>
              </button>
              {% endif %}
            </div>

          </div>
        </div>

        <div class="col-lg-6">
          <div class="shop-details-content">
            <h1>{{product.name}}</h1>
            <div class="rating-review">
              <div class="rating">
                <p><a href="#reviews">({{ reviews.count }} نظر)</a></p>
              </div>
            </div>
            <p>{{ product.description|truncatechars:300 }}</p>
            <div class="price-area">
              {% if product.special_price %}
              <p class="price">{{product.special_price|intcomma}} تومان<del>{{product.price|intcomma}} تومان</del></p>
              {% else %}
              <p class="price">{{product.price|intcomma}}</p>
              {% endif %}
            </div>
            <div class="quantity-color-area">
              <div class="quantity-color">
                <h6 class="widget-title">تعداد</h6>
                <div class="quantity-counter">
                  <input name="quantity" type="number" class="quantity__input" value="1" 
                      min="1" max="{{ limit.0.max_purchase_limit }}" 
                      oninput="if(this.value > this.max) { this.value = this.max; alert('حداکثر تعداد مجاز برای خرید {{ limit.0.max_purchase_limit }} است.'); }">
                </div>
              </div>
            </div>
            <div class="shop-details-btn">
              <a href="{% url "add_cart_url" product.id %}" class="primary-btn1 hover-btn3">*افزودن به سبد خرید*</a>
            </div>

            <div class="product-info">
              <ul class="product-info-list">
                <li> <span>کد محصول:</span> {{ product.id }}</li>
                <li> <span>دسته‌بندی:</span> <a href="shop-slider.html">{{product.subcategory}}</li>
              </ul>
            </div>

            <div class="compare-wishlist-area">
              <ul>
                <li>
                  <a href="{% url "add_to_wishlist_url" %}">
                    <span>
                      <svg width="11" height="11" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_168_378)">
                          <path
                            d="M16.528 2.20919C16.0674 1.71411 15.5099 1.31906 14.8902 1.04859C14.2704 0.778112 13.6017 0.637996 12.9255 0.636946C12.2487 0.637725 11.5794 0.777639 10.959 1.048C10.3386 1.31835 9.78042 1.71338 9.31911 2.20854L9.00132 2.54436L8.68352 2.20854C6.83326 0.217151 3.71893 0.102789 1.72758 1.95306C1.63932 2.03507 1.5541 2.12029 1.47209 2.20854C-0.490696 4.32565 -0.490696 7.59753 1.47209 9.71463L8.5343 17.1622C8.77862 17.4201 9.18579 17.4312 9.44373 17.1868C9.45217 17.1788 9.46039 17.1706 9.46838 17.1622L16.528 9.71463C18.4907 7.59776 18.4907 4.32606 16.528 2.20919ZM15.5971 8.82879H15.5965L9.00132 15.7849L2.40553 8.82879C0.90608 7.21113 0.90608 4.7114 2.40553 3.09374C3.76722 1.61789 6.06755 1.52535 7.5434 2.88703C7.61505 2.95314 7.68401 3.0221 7.75012 3.09374L8.5343 3.92104C8.79272 4.17781 9.20995 4.17781 9.46838 3.92104L10.2526 3.09438C11.6142 1.61853 13.9146 1.52599 15.3904 2.88767C15.4621 2.95378 15.531 3.02274 15.5971 3.09438C17.1096 4.71461 17.1207 7.2189 15.5971 8.82879Z" />
                        </g>
                      </svg>
                    </span>
                    به لیست علاقه مندی ها اضافه کنید
                  </a>
                </li>
              </ul>
            </div>


            <div class="accordion" id="accordionExample">
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                    aria-expanded="true" aria-controls="collapseOne">
                    توضیحات
                  </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <div class="product-description">
                      {{product.description}}
                    </div>
                  </div>
                </div>

              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    اطلاعات اضافی
                  </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                  data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <div class="additional-information">
                      <table class="table total-table2">
                        <tbody>
                          {% if attributes %}
                          {% for attribute in attributes %}
                          <tr>
                            <td>{{attribute.name}}</td>
                            <td>{{attribute.value}}</td>
                          </tr>
                          {% endfor %}

                          {% else %}
                          <p>ویژگی و یا اطلاعات اضافی وجود ندارد</p>
                          {% endif %}


                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

              </div>
              <div class="accordion-item" id="reviews">
                <h2 class="accordion-header" id="headingThree">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    نظرات (15)
                  </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                  data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <div class="review-area">
                      <div class="row">
                        <div class="col-lg-12">
                          <div class="comment-section style-2">
                            <ul class="author-comment mb-60">

                              <!-- هر نظر -->
                              <li>
                                <div class="author-img">
                                  <img src="shop/img/inner-page/comment-author1.png" alt>
                                </div>
                                <div class="comment-content">
                                  <div class="author-post style-2">
                                    <div class="author-info">
                                      <h5>پولارد گیردت، <span> ۱۲ خرداد ۱۴۰۲</span></h5>
                                    </div>
                                    <ul class="rating">
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                    </ul>
                                  </div>
                                  <p>به نظر می‌رسد که این محصول از نظر کیفیت و عملکرد بسیار خوب است. تجربه‌ای عالی و
                                    کاربردی برای من به ارمغان آورد، به ویژه از نظر طول عمر و راحتی استفاده.</p>
                                  <a href="#" class="replay-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="11" viewBox="0 0 14 11">
                                      <path
                                        d="M8.55126 1.11188C8.52766 1.10118 8.50182 1.09676 8.47612 1.09903C8.45042 1.1013 8.42569 1.11018 8.40419 1.12486C8.3827 1.13954 8.36513 1.15954 8.35311 1.18304C8.34109 1.20653 8.335 1.23276 8.33539 1.25932V2.52797C8.33539 2.67388 8.2791 2.81381 8.17889 2.91698C8.07868 3.02016 7.94277 3.07812 7.80106 3.07812C7.08826 3.07812 5.64984 3.08362 4.27447 3.98257C3.2229 4.66916 2.14783 5.9191 1.50129 8.24735C2.59132 7.16575 3.83632 6.57929 4.92635 6.2679C5.59636 6.07737 6.28492 5.96444 6.97926 5.93121C7.26347 5.91835 7.54815 5.92129 7.83205 5.94001H7.84594L7.85129 5.94111L7.80106 6.48906L7.85449 5.94111C7.98638 5.95476 8.10864 6.01839 8.19751 6.11966C8.28638 6.22092 8.33553 6.35258 8.33539 6.48906V7.75771C8.33539 7.87654 8.45294 7.95136 8.55126 7.90515L12.8088 4.67796C12.8233 4.66692 12.8383 4.65664 12.8537 4.64715C12.8769 4.63278 12.8962 4.61245 12.9095 4.58816C12.9229 4.56386 12.9299 4.53643 12.9299 4.50851C12.9299 4.4806 12.9229 4.45316 12.9095 4.42887C12.8962 4.40458 12.8769 4.38425 12.8537 4.36988C12.8382 4.36039 12.8233 4.35011 12.8088 4.33907L8.55126 1.11188ZM7.26673 7.02381C7.19406 7.02381 7.11391 7.02711 7.02842 7.03041C6.56462 7.05242 5.92342 7.12504 5.21169 7.32859C3.79464 7.7335 2.11684 8.65116 1.00115 10.7175C0.940817 10.8291 0.844683 10.9155 0.729224 10.9621C0.613765 11.0087 0.486168 11.0124 0.368304 10.9728C0.250441 10.9331 0.149648 10.8525 0.0831985 10.7447C0.0167484 10.6369 -0.011219 10.5086 0.0040884 10.3819C0.499949 6.29981 2.01959 4.15202 3.70167 3.05391C5.03215 2.18467 6.40218 2.01743 7.26673 1.98552V1.25932C7.26663 1.03273 7.32593 0.810317 7.43839 0.615545C7.55084 0.420773 7.71227 0.260866 7.90565 0.152696C8.09902 0.0445258 8.31717 -0.00789584 8.53707 0.000962485C8.75698 0.00982081 8.97048 0.0796305 9.15506 0.203025L13.4233 3.43792C13.5998 3.55133 13.7453 3.7091 13.8462 3.8964C13.9471 4.08369 14 4.29434 14 4.50851C14 4.72269 13.9471 4.93333 13.8462 5.12063C13.7453 5.30792 13.5998 5.4657 13.4233 5.57911L9.15506 8.814C8.97048 8.9374 8.75698 9.00721 8.53707 9.01607C8.31717 9.02492 8.09902 8.9725 7.90565 8.86433C7.71227 8.75616 7.55084 8.59626 7.43839 8.40148C7.32593 8.20671 7.26663 7.9843 7.26673 7.75771V7.02381Z">
                                      </path>
                                    </svg>
                                    پاسخ (02)
                                  </a>
                                </div>
                              </li>

                              <li>
                                <div class="author-img">
                                  <img src="shop/img/inner-page/comment-author2.png" alt>
                                </div>
                                <div class="comment-content">
                                  <div class="author-post style-2">
                                    <div class="author-info">
                                      <h5>جیمز جوردن، <span> ۰۴ ژوئن ۲۰۲۳</span></h5>
                                    </div>
                                    <ul class="rating">
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star-fill"></i></li>
                                      <li><i class="bi bi-star"></i></li>
                                    </ul>
                                  </div>
                                  <p>به نظر می‌رسد که این محصول از نظر کیفیت و عملکرد بسیار خوب است. تجربه‌ای عالی و
                                    کاربردی برای من به ارمغان آورد، به ویژه از نظر طول عمر و راحتی استفاده.</p>
                                  <a href="#" class="replay-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="11" viewBox="0 0 14 11">
                                      <path
                                        d="M8.55126 1.11188C8.52766 1.10118 8.50182 1.09676 8.47612 1.09903C8.45042 1.1013 8.42569 1.11018 8.40419 1.12486C8.3827 1.13954 8.36513 1.15954 8.35311 1.18304C8.34109 1.20653 8.335 1.23276 8.33539 1.25932V2.52797C8.33539 2.67388 8.2791 2.81381 8.17889 2.91698C8.07868 3.02016 7.94277 3.07812 7.80106 3.07812C7.08826 3.07812 5.64984 3.08362 4.27447 3.98257C3.2229 4.66916 2.14783 5.9191 1.50129 8.24735C2.59132 7.16575 3.83632 6.57929 4.92635 6.2679C5.59636 6.07737 6.28492 5.96444 6.97926 5.93121C7.26347 5.91835 7.54815 5.92129 7.83205 5.94001H7.84594L7.85129 5.94111L7.80106 6.48906L7.85449 5.94111C7.98638 5.95476 8.10864 6.01839 8.19751 6.11966C8.28638 6.22092 8.33553 6.35258 8.33539 6.48906V7.75771C8.33539 7.87654 8.45294 7.95136 8.55126 7.90515L12.8088 4.67796C12.8233 4.66692 12.8383 4.65664 12.8537 4.64715C12.8769 4.63278 12.8962 4.61245 12.9095 4.58816C12.9229 4.56386 12.9299 4.53643 12.9299 4.50851C12.9299 4.4806 12.9229 4.45316 12.9095 4.42887C12.8962 4.40458 12.8769 4.38425 12.8537 4.36988C12.8382 4.36039 12.8233 4.35011 12.8088 4.33907L8.55126 1.11188ZM7.26673 7.02381C7.19406 7.02381 7.11391 7.02711 7.02842 7.03041C6.56462 7.05242 5.92342 7.12504 5.21169 7.32859C3.79464 7.7335 2.11684 8.65116 1.00115 10.7175C0.940817 10.8291 0.844683 10.9155 0.729224 10.9621C0.613765 11.0087 0.486168 11.0124 0.368304 10.9728C0.250441 10.9331 0.149648 10.8525 0.0831985 10.7447C0.0167484 10.6369 -0.011219 10.5086 0.0040884 10.3819C0.499949 6.29981 2.01959 4.15202 3.70167 3.05391C5.03215 2.18467 6.40218 2.01743 7.26673 1.98552V1.25932C7.26663 1.03273 7.32593 0.810317 7.43839 0.615545C7.55084 0.420773 7.71227 0.260866 7.90565 0.152696C8.09902 0.0445258 8.31717 -0.00789584 8.53707 0.000962485C8.75698 0.00982081 8.97048 0.0796305 9.15506 0.203025L13.4233 3.43792C13.5998 3.55133 13.7453 3.7091 13.8462 3.8964C13.9471 4.08369 14 4.29434 14 4.50851C14 4.72269 13.9471 4.93333 13.8462 5.12063C13.7453 5.30792 13.5998 5.4657 13.4233 5.57911L9.15506 8.814C8.97048 8.9374 8.75698 9.00721 8.53707 9.01607C8.31717 9.02492 8.09902 8.9725 7.90565 8.86433C7.71227 8.75616 7.55084 8.59626 7.43839 8.40148C7.32593 8.20671 7.26663 7.9843 7.26673 7.75771V7.02381Z">
                                      </path>
                                    </svg>
                                    پاسخ (02)
                                  </a>
                                </div>
                              </li>

                            </ul>
                          </div>


                          <div class="comment-section style-3">
                            <div class="comment-title">
                              <h3>نظر خود را ارسال کنید</h3>
                            </div>

                            <form class="contact-form" method="post">
                              {% csrf_token %}
                              <div class="row">

                                <div class="col-lg-12 mb-20">
                                  <div class="form-inner2 mb-30">
                                  </div>
                                </div>
                                <div class="col-md-12">
                                  <div class="form-inner mb-20">
                                    <textarea rows="5" placeholder="نظر شما *" name="comment"></textarea>
                                  </div>
                                </div>
                                <div class="col-md-12">
                                  <div class="form-inner mb-20">
                                    <input type="text" placeholder="نام خود را وارد کنید" name="name">
                                  </div>
                                </div>
                                <div class="col-md-12">
                                  <div class="form-inner mb-20">
                                    <input type="email" placeholder="ایمیل خود را وارد کنید" name="email">
                                  </div>
                                </div>
                                <div class="col-md-12 pt-30">
                                  <button type="submit" class="primary-btn1 hover-btn3">ارسال</button>
                                </div>
                              </div>
                            </form>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="{% static " shop/js/jquery-3.6.0.min.js" %}"></script>

  <script src="{% static " shop/js/popper.min.js" %}"></script>
  <script src="{% static " shop/js/jquery.nice-select.min.js" %}"></script>

  <script src="{% static " shop/js/jquery.fancybox.min.js" %}"></script>
  <script src="{% static " shop/js/bootstrap.min.js" %}"></script>
  <script src="{% static " shop/js/slick.js" %}"></script>

  <script src="{% static " shop/js/swiper-bundle.min.js" %}"></script>
  <script src="{% static " shop/js/waypoints.min.js" %}"></script>

  <script src="{% static " shop/js/main.js" %}"></script>
  {% include "footer.html" %}
</body>

{% endblock content %}